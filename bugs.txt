export USER="echo lol"              DONE
export lol=cat -> $lol fichier      DONE
expend var d'env dans les arguments DONE


builtins doivent etre lancés dans des processus si il y a des pipes                 DONE
    cd .. | echo lol ne doit pas changer le dossier du process principal            DONE
    echo lol | export a=gfuygugfuy -> export command not found                      DONE
    export a=hfufgf | echo lol -> crée une variable d'env avec l'argument du echo   DONE


cd -> doit t'emmener a la racine tdeville/ sauf si HOME est unset   DONE
    Si HOME unset: cd: HOME not set
cd ~ -> racine tdeville                                             DONE
cd - -> Revoie au OLDPWD et affiche la ou on est arrive             DONE
    If OLDPWD not set : OLDPWD is not set ;
check si a chaque utilisation du CD je set OLDPWD                   DONE
Bien checker le retour de chdir pour gerer les cas d'erreur         -1 non geré mais pas besoin pour le moment



CHECK LEAKS
    autre term
    ps -> pid minishell
    leaks pid

    leaks
        leaks sur SHLVL.


Checker tout les pipes/fd sur activity monitor
Enlever bash dans les message d'erreurs


OPEN FILES & REDIRECTIONS
    pas de message d'erreur pour cat file > test 1
        -> cat: 1: No such file or directory
    

TEST THALLARD https://github.com/thallard/minishell_tester/tree/main/file_tests


19/09/22

Regler la gestion de synthax error DONE -> Manque quelques message d'erreurs mais pas de crash
Faire des signaux pixels
    - here doc dans un fork, ecrire dans un pipe
gestion du SHLVL
    - voir en cas de suppression de la variable
Voir pour lancement du minishell sans ENV (env -i)
    - segfault en cas de cd 

Segfault si here_doc sans commande  DONE


HEREDOC:
    Dans here_doc si ctrl + D = pareil que mettre le del
    Si pas de commande dans le HD, boucle inf si pipe apres avec commande qui attend de la data
    quand complete le HD, ne sort pas d'un des process  DONE

GROS CHANGEMENTS:
    j'ai mis le here doc a l'interieur de l'exec et je l'ai retiré
    du lexer
    Voir pour set la variable global dans les signaux a l'interieur des
    process


e_exec -> ligne 109 -> je passe l'adresse de l'emplacement du tableau





A FAIRE 

exit 
Set la variable global 



segfault quand ctrl + D

voir pour le else write \n dans e_exec.c ligne 121 - 122


< main.c >> out""                                   DONE
< main.c >> out   => rend en \n                     DONE

voir si creation de file sans commande (>> out)     DONE
voir pour valeur d'exit dans le HD

export > file -> ne creer pas le file               
parse quote dans le content de export               DONE
checker si export quelque chose qui n'es pas une lettre fonctionne
    Si le premier char est un chiffre ca marche pas sinon ca marche
    si ya cchar special dans la variable ca march epas
    si le prem char est # juste print


GERER SHLVL
    1. mettre la liste t_envp sous forme de double tableau qu'il faudra passer en param
    a execve
    2. juste creer une fonction (qui normalement existe deja) qui incremente la variable
    SHLVL


LEAK DANS LE SHLVL

check pipe leak
    ps
    lsof -p process
    leaks reparé en ajoutant une condition dans e_exec ligne 20 (a voir si c'est ok)


29/09 A FAIRE

< /dev/urandom ./minishell = casse le minishell

<< ok << ok << ok   ctrl+c  -> doit quitter les 3 d'un coup 

voir les endroits ou il y a itoa car possibilité de leak

sleep 2 | aaaa -> commandes doivent se lancer en meme temps (a checker ligne 118 e_exec.c)
echo $? suite a un commande not found marche aps

voir les msg d'erreur car peut faire varier les exit status
voir dans execve si cmd not found, access dinied... et faire un exit different

exit gdeuwguy =
    exit
    exit: gdeuwguy: numeric argument required (pareil avec plus de int ou long max et renvoie un exit status de 255)
    le exit fonctionne quand meme
exit fait modulo 256 de l'int qui esst donné et le stocke dans la variable $?

trop de fork pas d'erreur => ls | ls | ls ....

Renommer les dossier (sans espaces !!!)

export ECH=ech                              DONE
$ECH"o" salut => ne marche pas              DONE

export AA=12                                DONE
export BB=$AA => devrait etre egal a 12     DONE    
    voir get_cmd_in_arg dans p_bin_path pour gerer ca   DONE

echo $USER$^USER = marche plus

Pour tester les leaks 
    while (TRUE) do leaks minishell ; sleep 1;clear; done;

voir modifications p_bin_path lignes 94 a 98

voir pour minishell dans minishell sigaux se font plusieurs fois. set une variable dans une structure ?


voir HD mettre readline et voir pour 65k+ char


quand utilise export, rester bloquer dans un processus enfant
unset not found mais fais quand meme unset
exit avec trop d'argument = msg d'erreur puis fais un exit command not found

exit | exit = deux fois command not found

cat puis ctrl + \ pas exactement le meme output


Changement: 
    modification fonctions built_fork et built_not_fork, nous ne passons plus l'adresse. 

Problemes de redirections et d'open
Leak PIPE (lsof -p 'process')
